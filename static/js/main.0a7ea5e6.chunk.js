(this["webpackJsonpreact-view-editor-example"]=this["webpackJsonpreact-view-editor-example"]||[]).push([[1],{334:function(e,t,n){},590:function(e,t,n){},591:function(e,t,n){"use strict";n.r(t);n(334);var a=n(0),r=n.n(a),c=n(41),i=n.n(c),o=n(1),l=n(2),u=n(12),s=n(11),d=n(5),f=n(6),m=n(22),v=n(17),p=n(14),h=n(66),b=n(28),E=n.n(b),g=n(648),O=n(644),j=n(649),y=n(643),w=n(650),x=n(651),S=n(652),N=n(243),k=n.n(N),L=n(8),C=n.n(L),_=n(83),R=n(60),T=n(331),I=n(241),M=n(144),z=n(645),P=n(65),D=n(647),A=n(631),J=n(646),$=n(638),W=n(639),B=n(327),F=n.n(B),V=n(207),q=n(74),K=n.n(q),Y=n(239),X=n.n(Y),H=(n(89),n(328)),Z=n.n(H),U=n(236),Q=n(125),G=n.n(Q),ee=(n(588),{field:{avatar:{action:"/open-api/upload_static_file/view-editor",transformResponse:function(e){return{code:e.code,msg:e.msg,results:E()(e,"results[0].targetPath")}}},upload:{action:"/open-api/upload_static_file/view-editor",transformResponse:function(e){return{code:e.code,msg:e.msg,results:E()(e,"results[0].targetPath")}}}}});Object(h.q)(ee);var te=Object(a.createContext)({}),ne=te.Provider,ae=(te.Consumer,function(){return Object(a.useContext)(te)}),re={stage:"_qlJRc",content:"_2c6OT",axis:"_2KpIt",background:"_ip0hT",scaler:"_3KQrZ","scale-value":"_2cktr",btn:"_2RbGJ","page-position":"_24K8d",page:"_2Bqf1","active-mirror":"_1eqLg","active-outer":"_3RS1Z",options:"_13V2I",left:"_28LLb",top:"_2qv4W","options-btn":"_18ess","options-id":"_2MUcZ",active:"_SKveW"},ce=function(){var e=ae(),t=e.content,n=e.emitter;return r.a.createElement("div",{className:re.page},r.a.createElement(_.a,{content:t,emitter:n}))},ie="_XX9cC",oe=function(e){var t=e.onDrag,n=Object(a.useState)(!1),r=Object(p.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(null),l=Object(p.a)(o,2),u=l[0],s=l[1],d=Object(a.useRef)(u),f=Object(a.useRef)(null);d.current=u;var m=Object(a.useRef)(c);m.current=c;var v=Object(a.useRef)(t);return v.current=t,Object(a.useEffect)((function(){var e=function(){if(m.current){var e,t;if(e=d.current,t=f.current,Math.abs(E()(e,"y",0)-E()(t,"y",0))+Math.abs(E()(e,"x",0)-E()(t,"x",0))<10)i(!1);else d.current&&v.current&&v.current(d.current),i(!1),s(null)}},t=function(e){m.current&&s({x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop})};return document.addEventListener("mouseup",e),document.addEventListener("mousemove",t),function(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",t)}}),[]),{local:u,startDrag:c,onDragStart:function(e){f.current={x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop},i(!0)}}},le=function(e){var t=e.top,n=e.left;return Object(c.createPortal)(r.a.createElement("div",{className:ie,style:{top:t,left:n}},r.a.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",style:{background:"#FFF"}},r.a.createElement("path",{d:"M940.8 242.688L530.56 4.8c-11.2-6.4-25.6-6.4-36.736 0L83.584 242.688c-11.2 6.4-19.2 19.136-19.2 31.872V748.8c0 12.8 6.4 25.536 19.2 31.936l410.24 236.288c11.2 6.4 25.6 6.4 36.736 0L940.8 780.736c11.2-6.4 19.2-19.2 19.2-32V274.56c0-14.336-8-25.536-19.2-31.872z m-44.672 490.048L513.024 953.088 129.856 732.736V288.96L513.024 68.672 896.128 290.56V732.8z",fill:"#1890FF"}),r.a.createElement("path",{d:"M279.936 340.032a30.976 30.976 0 0 0-43.136 11.2c-7.936 14.336-3.2 35.136 11.2 43.072l233.088 135.68v268.224a32 32 0 0 0 31.936 31.936 32 32 0 0 0 31.872-31.936v-269.76l233.088-134.144c16-9.6 20.8-28.736 11.2-43.072-9.6-16-28.736-20.8-43.136-11.2l-233.024 134.08-233.088-134.08z",fill:"#1890FF"}))),document.body)},ue=function e(t,n){return t!==document.body&&!F()(t)&&(t===n||e(t.parentElement,n))},se=function(e){var t=e.children,n=ae(),c=n.emitter,i=n.active,o=n.action,l=Object(a.useRef)(null),u=Object(a.useRef)({x:0,y:0}),s=Object(a.useRef)(null),d=Object(a.useState)([]),f=Object(p.a)(d,2),m=f[0],h=f[1];Object(a.useEffect)((function(){if(i){var e=l.current.getBoundingClientRect(),t=s.current.getBoundingClientRect(),n=t.width,a=(t.top,t.height),r=i.local.left+i.local.width-n,c=i.local.top+i.local.height,o=[];r<0&&o.push("left"),c+a+e.top>e.height&&o.push("top"),h(o.map((function(e){return re[e]})))}}),[i]);var b=oe({onDrag:function(e){i&&o.placed({componentId:i.id,local:e})}}),E=b.startDrag,j=b.local,y=b.onDragStart;return Object(a.useEffect)((function(){var e=c.addListener("drag-down",(function(e){var t=e.local,n=e.data;t&&o.append({componentName:n.id,local:t})}));return function(){e.remove()}}),[c,o.append]),Object(a.useEffect)((function(){var e=c.addListener("component-appended",(function(){o.relocation(),o.removeActive()})),t=c.addListener("component-removed",(function(){o.relocation(),o.removeActive()})),n=c.addListener("relocation",(function(){o.relocation()}));return function(){e.remove(),t.remove(),n.remove()}}),[c]),r.a.createElement(R.a,{onResize:function(){o.relocation()}},r.a.createElement("div",{className:re["active-outer"],ref:l,onClick:function(e){if(!ue(e.target,s.current)){var t=l.current.getBoundingClientRect();u.current={x:t.left+document.documentElement.scrollLeft,y:t.top+document.documentElement.scrollTop},o.setActive({x:e.clientX,y:e.clientY})}}},t,i?r.a.createElement("div",{className:re.active,style:{top:i.local.top-u.current.y,left:i.local.left-u.current.x,width:i.local.width,height:i.local.height},onMouseDown:function(e){ue(e.target,s.current)||y(e)}},E&&j?r.a.createElement(le,{top:j.y,left:j.x}):null,r.a.createElement("div",{className:C.a.apply(void 0,[re.options].concat(Object(v.a)(m))),ref:s},r.a.createElement(T.b,{size:4},r.a.createElement("div",{className:re["options-id"]},i.id),r.a.createElement(g.a,{className:re["options-btn"],onClick:o.selectParent}),r.a.createElement(O.a,{className:re["options-btn"],onClick:o.remove})))):null))},de=function(e){var t=e.scale,n=e.width,c=e.height,i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){return{width:100*n/t,height:100*c/t}}),[n,c,t]),l=o.width,u=o.height;return Object(a.useEffect)((function(){var e=2*l,t=2*u,n=i.current.getContext("2d");n.clearRect(0,0,e,t),function(){n.fillStyle="#ececec";for(var a=0;a<=e;){for(var r=0;r<=t;)(a%40===0&&r%40===0||a%40!==0&&r%40!==0)&&n.fillRect(a,r,20,20),r+=20;a+=20}}()}),[l,u]),r.a.createElement("canvas",{className:C()(re.axis,re.background),ref:i,width:2*l,height:2*u,style:{width:l,height:u}})},fe=function(e){var t=e.scale,n=e.width,c=e.height,i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){return{width:100*n/t,height:100*c/t}}),[n,c,t]),l=o.width,u=o.height;return Object(a.useEffect)((function(){var e=2*l,t=2*u,n=i.current.getContext("2d");n.clearRect(0,0,e,t),function(){n.lineWidth=1,n.strokeStyle="#314659",n.fillStyle="#314659",n.font="24px Arial",n.textAlign="center",n.textBaseline="middle",n.beginPath();for(var a=0,r=0;a<=e;)a+=10,n.moveTo(a,0),n.lineTo(a,a%200===0?20:10),a%200===0&&n.fillText(a/2,a,40);for(;r<=t;)r+=10,n.moveTo(0,r),n.lineTo(r%200===0?20:10,r),r%200===0&&n.fillText(r/2,45,r);n.stroke()}()}),[l,u]),r.a.createElement("canvas",{className:re.axis,ref:i,width:2*l,height:2*u,style:{width:l,height:u}})},me=function(e){var t=e.scale,n=e.width,c=e.height,i=Object(a.useRef)(t);i.current=t;var o=Object(a.useState)([]),l=Object(p.a)(o,2),u=l[0],s=l[1],d=Object(a.useRef)(null),f=Object(a.useMemo)((function(){return{width:100*n/t,height:100*c/t}}),[n,c,t]),m=f.width,v=f.height;return Object(a.useEffect)((function(){var e=!1,t=!1,n=function(e){var t=0,n=0;do{t+=e.offsetLeft,n+=e.offsetTop}while(e=e.offsetParent);return{left:t,top:n}}(d.current),a=n.left,r=n.top,c=function(n){var c=n.clientX-a+document.documentElement.scrollLeft,o=n.clientY-r+document.documentElement.scrollTop;return o<10?(e=!0,void s((function(e){var t=e.filter((function(e){return!e.active})).slice(0);return t.push({position:100*o/i.current,direction:"horizontal",active:!0}),t}))):c<10?(t=!0,void s((function(e){var t=e.filter((function(e){return!e.active})).slice(0);return t.push({position:100*c/i.current,direction:"vertical",active:!0}),t}))):void s((function(n){var a=n.find((function(e){return"horizontal"===e.direction&&Math.abs(100*o/i.current-e.position)<2||"vertical"===e.direction&&Math.abs(100*c/i.current-e.position)<2}));if(a){var r=n.slice(0);return"horizontal"===a.direction&&(e=!0),"vertical"===a.direction&&(t=!0),r[n.indexOf(a)]=Object.assign({},a,{active:!0}),r}return n}))},o=function(n){var c=n.clientX-a+document.documentElement.scrollLeft,o=n.clientY-r+document.documentElement.scrollTop;e?s((function(e){var t=e.slice(0),n=e.find((function(e){var t=e.active,n=e.direction;return t&&"horizontal"===n}));if(n){var a=t.indexOf(n);t[a]=Object.assign({},n,{position:100*o/i.current})}return t})):t&&s((function(e){var t=e.slice(0),n=e.find((function(e){var t=e.active,n=e.direction;return t&&"vertical"===n}));if(n){var a=t.indexOf(n);t[a]=Object.assign({},n,{position:100*c/i.current})}return t}))},l=function(n){e=!1,t=!1,s((function(e){return e.filter((function(e){return e.position>10})).map((function(e){return Object.assign({},e,{active:!1})}))}))};return document.body.addEventListener("mousedown",c,!0),document.body.addEventListener("mousemove",o,!0),document.body.addEventListener("mouseup",l,!0),document.body.addEventListener("mouseleave",l,!1),function(){document.body.removeEventListener("mousedown",c,!0),document.body.removeEventListener("mousemove",o,!0),document.body.removeEventListener("mouseup",l,!0),document.body.addEventListener("mouseleave",l,!1)}}),[]),Object(a.useEffect)((function(){var e=2*m,t=2*v,n=d.current.getContext("2d");n.clearRect(0,0,e,t),n.lineWidth=1,n.strokeStyle="cyan",n.beginPath(),u.forEach((function(a){"horizontal"===a.direction&&(n.moveTo(0,2*a.position),n.lineTo(e,2*a.position)),"vertical"===a.direction&&(n.moveTo(2*a.position,0),n.lineTo(2*a.position,t))})),n.stroke()}),[m,v,u]),r.a.createElement("canvas",{className:re.axis,ref:d,width:2*m,height:2*v,style:{width:m,height:v}})},ve=function(){var e=ae(),t=e.setStageScale,n=e.stageScale;return r.a.createElement("div",{className:re.scaler},r.a.createElement("div",{className:re.btn,onClick:function(){t((function(e){return e-10}))}},r.a.createElement(j.a,null)),r.a.createElement("div",{className:re["scale-value"]},n,"%"),r.a.createElement("div",{className:re.btn,onClick:function(){t((function(e){return e+10}))}},r.a.createElement(y.a,null)),r.a.createElement("div",{className:re.btn,onClick:function(){t((function(){return 100}))}},r.a.createElement(w.a,null)))},pe=function(e){var t=e.className,n=ae(),c=n.stageScale,i=n.stageSize,o=Object(a.useState)({width:500,height:500}),l=Object(p.a)(o,2),u=l[0],s=l[1],d=Object(a.useState)(0),f=Object(p.a)(d,2),m=f[0],v=f[1];Object(a.useEffect)((function(){var e=(u.width-b.current.clientWidth)/2;v(e)}),[u,i]);var h=Object(a.useRef)(null),b=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=function(){s({width:h.current.scrollWidth,height:h.current.scrollHeight})};e();var t=k()(e,300);return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),r.a.createElement("div",{ref:h,className:C()(re.stage,t)},r.a.createElement("div",{style:{width:u.width,height:u.height,overflow:"hidden"}},r.a.createElement("div",{className:re.content,style:{transform:"scale(".concat(c/100,")")}},r.a.createElement(de,{width:u.width,scale:c,height:u.height})),r.a.createElement("div",{className:re.content,style:{transform:"scale(".concat(c/100,")"),transformOrigin:"50% 50%"}},r.a.createElement("div",{ref:b,className:re["page-position"],style:{width:i,top:0,left:m}},r.a.createElement(se,null,r.a.createElement(ce,null)))),r.a.createElement("div",{className:re.content,style:{transform:"scale(".concat(c/100,")")}},r.a.createElement(fe,{width:u.width,scale:c,height:u.height}),r.a.createElement(me,{width:u.width,scale:c,height:u.height}))),r.a.createElement(ve,null))},he=function(e){var t=e.className,n=ae(),c=n.content,i=n.action,o=Object(a.useState)(JSON.stringify(c,null,2)),l=Object(p.a)(o,2),u=l[0],s=l[1],d=Object(a.useState)({width:400,height:400}),f=Object(p.a)(d,2),m=f[0],v=f[1],h=Object(a.useRef)(null),b=Object(a.useRef)(null);return b.current=function(){i.setContent(JSON.parse(u))},Object(a.useEffect)((function(){v({width:h.current.clientWidth,height:h.current.clientHeight})}),[]),Object(a.useEffect)((function(){return function(){b.current()}}),[]),r.a.createElement(R.a,{onResize:function(){v({width:h.current.clientWidth,height:h.current.clientHeight})}},r.a.createElement("div",{className:C()(t),ref:h},r.a.createElement(V.a,{width:m.width,height:m.height,language:"javascript",value:u,onChange:function(e){s(e)}})))};function be(){return be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},be.apply(this,arguments)}function Ee(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}var ge=["depth","parentId"],Oe=new Z.a,je=function(e){var t=e.list,n=e.state,a=e.local,r=a.x,c=a.y,i=r+document.documentElement.scrollLeft,o=c+document.documentElement.scrollTop;return t.find((function(e){var t=e.id;if(!n[t])return!1;var a=n[t].local;return i>a.x&&i<a.x+a.w&&o>a.y&&o<a.y+a.h}))},ye=function(e){var t=e.componentData,n=e.list,a=E()(_.c[t.component],"children.dependence"),r=E()(_.c[t.component],"children.forbid"),c=function e(a,r){if(!a)return!1;var c=[t].concat(Object(v.a)(n)).find((function(e){return a===e.id}));return!!c&&(!!n.find((function(e){return c.parentId===e.id&&r.indexOf(e.component)>-1}))||e(c.parentId,r))};return a&&a.length>0&&!1===c(t.id,a)||r&&r.length>0&&c(t.id,r)},we=function(e){var t=e.componentData,n=e.local,a=function(e){var t=e.list,n=e.state,a=e.componentName,r=e.local,c=function(){var e=je({list:t,state:n,local:r});return function e(n){if(!n)return null;var r=t.find((function(e){return e.id===n}));if(!r)return null;var c=E()(_.c[r.component],"children.allow");return c&&-1===c.indexOf(a)?e(r.parentId):r}(E()(e,"id",null))||null}(),i=function(){var e=t.filter((function(e){return e.parentId===E()(c,"id",null)}));if(0===e.length)return t.length;var a=function(e,t){return Math.sqrt(e*e+t*t)},i=e.find((function(e){var t=e.id;if(!n[t])return!1;var c=n[t].local;return a(c.x,c.y)-a(r.x,r.y)>0}));return i?e.indexOf(i)+t.indexOf(e[0]):t.length}();return{parent:c,index:i}}({list:e.list,state:e.state,componentName:(t=Object.assign({},t)).component,local:n}),r=a.parent,c=a.index;return r?(t.parentId=r.id,t.depth=r.depth+1):(t.parentId=null,t.depth=0),{componentData:t,index:c}},xe=function(e){return e.list.sort((function(e,t){return t.depth-e.depth}))},Se=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({}),i=Object(p.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)({}),s=Object(p.a)(u,2),d=s[0],f=s[1],m=Object(a.useState)({}),h=Object(p.a)(m,2),b=h[0],g=h[1],O=Object(a.useState)(null),j=Object(p.a)(O,2),y=j[0],w=j[1],x=Object(a.useRef)(n),S=Object(a.useRef)(o);x.current=n,S.current=o;var N=Object(a.useMemo)((function(){return function(e){var t=e.list.slice(0);return function e(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.forEach((function(n){var r=Ee(n,ge),c=t.filter((function(e){return e.parentId===n.id})).sort((function(e,t){return e.index-t.index}));c&&c.length>0&&(r.children=e(c)),a.push(r)})),a}(t.filter((function(e){var n=e.parentId;return!(n&&t.find((function(e){return e.id===n})))})))}({list:n})}),[n]),k=function(){l(function(e){var t=e.list,n={};return t.forEach((function(e){var t=e.id,a=document.querySelector(".id_".concat(t));if(a){var r=a.getBoundingClientRect();window.getComputedStyle(a).zIndex;var c={x:r.left+document.documentElement.scrollLeft,y:r.top+document.documentElement.scrollTop,w:r.width,h:r.height};n[t]={id:t,local:c}}})),n}({list:x.current}))};return{active:Object(a.useMemo)((function(){if(!y)return null;var e=n.find((function(e){return e.id===y}));if(!e)return null;var t=o[e.id];return t?{local:{top:t.local.y,left:t.local.x,width:t.local.w,height:t.local.h},id:e.id,component:e.component}:null}),[y,n,o]),componentList:n,content:Object(a.useMemo)((function(){return{variable:b,functions:d,data:N}}),[b,d,N]),action:{append:function(e){var t=e.componentName,n=e.local,a=we({componentData:{id:K()("".concat(t,"-")),component:t,props:E()(_.c,"".concat(t,".defaultProps"),{}),parentId:null,depth:0},local:n,list:x.current,state:S.current}),c=a.componentData,i=a.index;ye({componentData:c,list:x.current})?I.b.warning("\u7ec4\u4ef6\u4e0d\u80fd\u653e\u7f6e\u5728\u8be5\u4f4d\u7f6e"):(r((function(e){var t=e.slice(0);return t.splice(i,0,c),xe({list:t})})),w(null))},placed:function(e){var t=e.componentId,n=e.local,a=x.current.find((function(e){return e.id===t}));if(a){var c=we({componentData:a,local:n,list:x.current,state:S.current}),i=c.componentData,o=c.index;(function e(t,n){if(!n)return!0;if(t===n)return!1;var a=x.current.find((function(e){return e.id===n}));return!!a&&(a.parentId!==t&&e(t,a.parentId))})(i.id,i.parentId)&&(ye({componentData:i,list:x.current})?I.b.warning("\u7ec4\u4ef6\u4e0d\u80fd\u653e\u7f6e\u5728\u8be5\u4f4d\u7f6e"):(r((function(e){var n=X()(e,(function(e){return e.id===t})),a=e.slice(0);return a.splice(n,1),a.splice(o,0,i),xe({list:a})})),w(null),k()))}},remove:function(){M.a.confirm({content:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u7ec4\u4ef6\u4ef6\u53ca\u5176\u5b50\u7ec4\u4ef6\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){r((function(e){var t=e.slice(0);return function t(n){var a=[];return a.push(n),e.filter((function(e){return e.parentId===n})).forEach((function(e){var n=e.id;a.push.apply(a,Object(v.a)(t(n)))})),a}(y).forEach((function(e){var n=X()(t,(function(t){return t.id===e}));t.splice(n,1)})),xe({list:t})})),w(null)}})},relocation:k,setActive:function(e){var t=je({list:x.current,state:S.current,local:e});w(t?t.id:null)},setProps:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.find((function(t){return t.id===e}));if(a){var c=_.c[a.component].property,i={};Object.keys(c).forEach((function(e){var n=t[e],a=E()(c,"[".concat(e,"].jsonschema"));if(a&&!Oe.compile(a)(n))return;i[e]=n})),r((function(t){var n=t.find((function(t){return t.id===e})),a=t.indexOf(n),r=t.slice(0),c=Object.assign({},n.props,i);return Object.keys(c).filter((function(e){return""===c[e]||void 0===c[e]})).forEach((function(e){delete c[e]})),r.splice(a,1,Object.assign({},n,{props:c})),r})),k()}},removeActive:function(){w(null)},selectParent:function(){if(y){var e=x.current.find((function(e){return e.id===y}));if(e){var t=x.current.find((function(t){return t.id===e.parentId}));w(t?t.id:null)}else w(null)}},setVariable:g,setFunctions:f,setContent:function(e){var t=Object.assign({},e),n=t.variable,a=t.functions,c=t.data;g(n),f(a);var i=function(e){var t=[];return function e(n,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n.forEach((function(n){t.push({component:n.component,depth:r,id:n.id,parentId:a,props:Object.assign({},n.props,"string"===typeof n.children?{children:n.children}:{})}),Array.isArray(n.children)&&e(n.children,n.id,r+1)}))}(e),xe({list:t})}(c);r(i),x.current=i,k()}}}},Ne=["code","onChange","options","close"],ke=Object(U.b)((function(e){var t=e.code,n=e.onChange,c=e.options,i=e.close,o=Ee(e,Ne),l=Object(a.useState)(JSON.stringify(t,null,2)),u=Object(p.a)(l,2),s=u[0],d=u[1];return r.a.createElement(M.a,be({},o,{title:"\u53d8\u91cf\u5b9a\u4e49",width:848,onOk:function(){try{n(JSON.parse(s)),i()}catch(e){I.b.error("JSON\u8f6c\u6362\u9519\u8bef")}}}),r.a.createElement(V.a,{width:"800",height:"400",language:"json",value:s,options:c,onChange:d}))})),Le=["code","onChange","options","close"],Ce=Object(U.b)((function(e){var t=e.code,n=e.onChange,c=e.options,i=e.close,o=Ee(e,Le),l=Object(a.useState)(JSON.stringify(t,null,2)),u=Object(p.a)(l,2),s=u[0],d=u[1];return r.a.createElement(M.a,be({},o,{title:"\u51fd\u6570\u5b9a\u4e49",width:848,onOk:function(){try{n(JSON.parse(s)),i()}catch(e){I.b.error("JSON\u8f6c\u6362\u9519\u8bef")}}}),r.a.createElement(V.a,{width:"800",height:"400",language:"javascript",value:s,options:c,onChange:d}))})),_e="_2TjlL",Re=function(){var e=ae(),t=e.stageSize,n=e.setStageSize,a=e.content,c=e.action,i=e.codeMode,o=e.setCodeMode;return r.a.createElement("div",{className:_e},r.a.createElement(T.b,null,r.a.createElement("span",null,"\u9875\u9762\u7c7b\u578b:"),r.a.createElement(z.a,{value:t,onChange:n,placeholder:"\u8bf7\u9009\u62e9\u7c7b\u578b"},r.a.createElement(z.a.Option,{value:"100%"},"\u81ea\u9002\u5e94"),r.a.createElement(z.a.Option,{value:"1366px"},"PC\u7aef"),r.a.createElement(z.a.Option,{value:"375px"},"iPhone 6/7/8"),r.a.createElement(z.a.Option,{value:"414px"},"iPhone 6/7/8 Plus"),r.a.createElement(z.a.Option,{value:"768px"},"iPad"),r.a.createElement(z.a.Option,{value:"1024px"},"iPad Pro")),r.a.createElement(P.a,{type:"link",onClick:function(){Ce({code:a.functions,onChange:function(e){c.setFunctions(e)}})}},"\u51fd\u6570"),r.a.createElement(P.a,{type:"link",onClick:function(){ke({code:a.variable,onChange:function(e){c.setVariable(e)}})}},"\u53d8\u91cf"),r.a.createElement(D.a,{checked:i,onChange:o,checkedChildren:"\u4ee3\u7801\u6a21\u5f0f",unCheckedChildren:"\u53ef\u89c6\u5316\u6a21\u5f0f"})))},Te="_3IBdY",Ie="_32xpI",Me="_pIwSi",ze="_2n118",Pe="_2CjBS",De="_3dBKd",Ae="_2yEkw",Je="_8nWzQ",$e="_3_tv5",We=A.a.TabPane,Be=function(e){var t=e.className,n=e.data,a=e.children,c=ae().emitter,i=oe({onDrag:function(e){c.emit("drag-down",{local:e,data:n})}}),o=i.startDrag,l=i.local,u=i.onDragStart;return r.a.createElement("div",{className:t,onMouseDown:u},a,o&&l?r.a.createElement(le,{left:l.x,top:l.y}):null)},Fe=function(){return r.a.createElement(A.a,{className:Ae,defaultActiveKey:"1",tabPosition:"left",type:"card"},Object.values(_.b).map((function(e){var t=e.id,n=e.label,a=e.components;return r.a.createElement(We,{tab:n,key:t},r.a.createElement(T.b,{className:$e},a.map((function(e){var t=e.name,n=e.id;return r.a.createElement(Be,{key:n,className:Je,data:e},t)}))))})))},Ve=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],c=t[1],i=Object(a.useRef)(null),o=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=function(){clearTimeout(i.current),c(!0)},t=function(){i.current=setTimeout((function(){c(!1)}),300)};return o.current.addEventListener("mouseover",e),o.current.addEventListener("mouseout",t),function(){o.current&&o.current.removeEventListener("mouseover",e),o.current&&o.current.removeEventListener("mouseout",t)}}),[]),r.a.createElement("div",{className:Te,ref:o},r.a.createElement("div",{className:C()(Pe,Object(m.a)({},De,n))},r.a.createElement(Fe,null)),r.a.createElement("div",{className:Ie},r.a.createElement("div",{className:Me},r.a.createElement(x.a,{className:ze})," \u6dfb\u52a0\u5185\u5bb9")))},qe="_YzWfl",Ke="_kVJyv",Ye="_32TiZ",Xe="_sbnoD",He="_lwCWd",Ze={$input:h.g,$switch:h.m,$select:h.k,$radio:h.i,$number:h.h,$array:function(e){var t=e.name,n=e.label,c=e.children,i=Object(a.useRef)(null);return r.a.createElement(T.b,{direction:"vertical"},r.a.createElement(T.b,null,r.a.createElement("div",{className:Xe},n),r.a.createElement(P.a,{className:He,type:"text",onClick:function(){i.current.onAdd()}},r.a.createElement(x.a,null))),r.a.createElement(h.f,{ref:i,name:t},(function(e,t){var n=t.onRemove;return r.a.createElement(T.b,{align:"start"},c,r.a.createElement(P.a,{className:He,type:"text",onClick:function(){n(e)}},r.a.createElement(S.a,null)))})))},$object:function(e){var t=e.label,n=e.children;return r.a.createElement("div",null,r.a.createElement("div",null,t),r.a.createElement("div",null,n))},$avatar:h.a,$variable:function(e){var t=ae().content;return r.a.createElement(h.k,be({},e,{options:Object.keys(E()(t,"variable",{})).map((function(e){return{label:e,value:e}}))}))},$functions:function(e){var t=ae().content;return r.a.createElement(h.k,be({},e,{options:Object.keys(E()(t,"functions",{})).map((function(e){return{label:e,value:e}}))}))}},Ue=function e(t){return Object.keys(t).map((function(n){var a=t[n],c=Ze[a["input-type"]],i=Object.assign({},E()(a,"input-options"));if("$array"===a["input-type"]&&(i.children=e(Object(m.a)({},n,E()(i,"children",{})))),"$object"===a["input-type"]){var o={};Object.keys(i).forEach((function(e){o["".concat(n,".").concat(e)]=i[e]})),i.children=e(o)}return"$multiple"===a["input-type"]&&(i.options=E()(i,"options",{}).map((function(t){return{children:e(Object(m.a)({},n,Object.assign({},t,{label:a.label,labelHidden:!0}))),label:t.label}}))),c?r.a.createElement(c,be({key:n,name:n,label:a.label},i)):null}))},Qe=function(){var e=ae(),t=e.active,n=e.componentList,c=e.action,i=Object(a.useRef)(null),o=Object(a.useRef)(n);o.current=n,Object(a.useEffect)((function(){var e=E()(o.current.find((function(e){return e.id===t.id})),"props",{});i.current.emitter.emit("form-data-reset"),i.current.emitter.emit("form-data-set",{data:e,runValidate:!1})}),[t.id]);var l=Object(a.useRef)(c);l.current=c;var u=Object(a.useRef)(null);u.current=t.id;var s=_.c[t.component].property,d=Object(a.useMemo)((function(){return Ue(s)}),[s]);return Object(a.useEffect)((function(){var e=i.current.emitter.addListener("form-field-data-change",(function(){setTimeout((function(){var e=i.current.data;u.current&&l.current.setProps(u.current,e)}))}));return function(){e.remove()}}),[]),r.a.createElement(h.p,{ref:i,type:"inner"},d)},Ge=J.a.Panel,et=A.a.TabPane,tt=function(){var e=ae().active;return e?r.a.createElement(a.Fragment,null,r.a.createElement(T.b,{className:Ke},r.a.createElement("div",null,"ID:",e.id),r.a.createElement("div",null,"\u7ec4\u4ef6:",_.c[e.component].name,"(",e.component,")")),r.a.createElement(J.a,{defaultActiveKey:"1",ghost:!0,className:Ye},r.a.createElement(Ge,{header:"\u5c5e\u6027",key:"1"},r.a.createElement(Qe,null)),r.a.createElement(Ge,{header:"\u6837\u5f0f",key:"2"},r.a.createElement("p",null,"xxxxx")))):"\u8bf7\u9009\u62e9\u5de6\u4fa7\u8fdb\u884c\u7f16\u8f91..."},nt=function(){return r.a.createElement("div",null,"xxxxxx")},at=function(){return r.a.createElement(A.a,{className:qe,defaultActiveKey:"1"},r.a.createElement(et,{tab:"\u5f53\u524d\u8282\u70b9",key:"1"},r.a.createElement(tt,null)),r.a.createElement(et,{tab:"\u8282\u70b9\u6811",key:"2"},r.a.createElement(nt,null)))},rt=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this)).debug=e,a}return Object(l.a)(n,[{key:"emit",value:function(){for(var e,t,a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];this.debug&&(t=console).log.apply(t,["[react-view-editor][debug]:"].concat(r));(e=Object(u.a)(Object(s.a)(n.prototype),"emit",this)).call.apply(e,[this].concat(r))}}]),n}(G.a.EventEmitter),ct="_2qYuo",it="_2oUsR",ot="_2WHTg",lt="_177ua",ut="_2U2gp",st=function(){var e=function(){var e=Object(a.useState)(100),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)("100%"),i=Object(p.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)(!1),s=Object(p.a)(u,2);return{stageScale:n,stageSize:o,setStageSize:l,setStageScale:function(e){return r((function(t){var n=e(t);return n<20?20:n>200?200:n}))},codeMode:s[0],setCodeMode:s[1]}}(),t=e.setStageScale,n=e.stageScale,c=e.stageSize,i=e.setStageSize,o=e.codeMode,l=e.setCodeMode,u=Se(),s=u.active,d=u.content,f=u.componentList,m=u.action,v=function(e){var t=Object(a.useRef)(e);return Object(a.useMemo)((function(){var e=new rt(t.current);return{addListener:function(){return e.addListener.apply(e,arguments)},emit:function(){return e.emit.apply(e,arguments)},removeAllListeners:function(){return e.removeAllListeners.apply(e,arguments)},listeners:function(){return e.listeners.apply(e,arguments)},once:function(){return e.once.apply(e,arguments)}}}),[])}();return r.a.createElement(ne,{value:{componentList:f,content:d,emitter:v,active:s,action:m,stageScale:n,setStageScale:t,codeMode:o,setCodeMode:l,stageSize:c,setStageSize:i}},r.a.createElement($.a,{wrap:!1,className:ct},r.a.createElement(W.a,{flex:"auto",className:it},r.a.createElement(Re,null),r.a.createElement($.a,{wrap:!1,className:ot},o?null:r.a.createElement(W.a,{flex:"40px",className:lt},r.a.createElement(Ve,null)),r.a.createElement(W.a,{flex:"auto"},o?r.a.createElement(he,{className:ut}):r.a.createElement(pe,{className:ut})))),o?null:r.a.createElement(W.a,{flex:"280px"},r.a.createElement(at,null))))},dt=n(200);var ft=function(){return Object(dt.jsx)(st,{})};n(590);i.a.render(Object(dt.jsx)(ft,{}),document.getElementById("root"))}},[[591,2,3]]]);
//# sourceMappingURL=main.0a7ea5e6.chunk.js.map