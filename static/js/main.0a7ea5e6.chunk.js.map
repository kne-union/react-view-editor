{"version":3,"sources":["../../src/preset.js","../../src/context.js","../../src/Stage/Page.js","../../src/common/DragItem/index.js","../../src/Stage/ActiveObject.js","../../src/Stage/index.js","../../src/CodeMode/index.js","../../src/hooks/useComponentState.js","../../src/Nav/showVariable.js","../../src/Nav/showFunctions.js","../../src/Nav/index.js","../../src/MenuList/ComponentList.js","../../src/MenuList/index.js","../../src/Toolbar/profilePropertyRender.js","../../src/Toolbar/Props.js","../../src/Toolbar/index.js","../../src/hooks/useEvent.js","../../src/index.js","../../src/hooks/useStageParam.js","App.js","index.js"],"names":["avatarParams","field","avatar","action","transformResponse","response","code","msg","results","get","upload","formReset","context","createContext","useGlobal","Consumer","useContext","Page","emitter","className","style","content","useDrag","onDrag","useState","localRef","useRef","startLocalRef","startDragRef","onDragRef","useEffect","mouseUpHandler","a","b","getDistance","Math","setStartDrag","setLocal","mouseMoveHandler","e","x","document","y","scrollTop","local","startDrag","onDragStart","DragItem","left","createPortal","top","viewBox","version","xmlns","width","height","background","d","fill","findTarget","dom","target","isNull","ActiveObject","children","outerRef","outerLocalRef","activeDomRef","rect","optionsLeft","active","optionsTop","optionsName","setOptionsName","name","componentId","sub","data","componentName","sub2","sub3","onResize","ref","onClick","clientY","onMouseDown","classnames","size","selectParent","remove","Background","originHeight","canvasRef","useMemo","originWidth","scale","w","h","canvas","Axis","Guideline","scaleRef","startX","startY","el","getNodeOffset","handlerMouseDown","setLines","lines","newLines","position","direction","line","Object","handlerMouseMove","activeLine","index","current","handlerMouseUp","item","Scaler","setStageScale","stageScale","setScale","Stage","stageSize","pageRef","setPagePosition","containerRef","resize","setSize","scrollHeight","resizeHandler","debounce","window","overflow","transform","transformOrigin","pagePosition","CodeMode","JSON","setContentRef","clientHeight","language","value","onChange","setCode","ajv","computedActiveComponent","clickLeft","clickTop","list","id","state","verifyComponent","dependence","profileMap","componentData","forbid","findTree","node","decorateComponent","parent","localParent","parentId","findParent","allow","computedDistance","childLocal","computedComponentAddress","generateListData","useComponentState","componentListRef","componentStateRef","treeData","newData","makeTree","nodes","output","generateTreeData","componentList","relocation","setComponentState","targetDom","computedState","activeComponent","componentState","component","variable","functions","append","uniqueId","props","depth","message","setComponentList","setActive","placed","prevComponent","parentIsAllowed","prevIndex","findIndex","newList","Modal","okText","cancelText","onOk","findTreeListChildrenIndex","setProps","configProps","property","key","jsonschema","validate","newProps","removeActive","parentComponent","setVariable","setFunctions","setContent","core","Array","parseTreeData","showVariable","withLayer","close","title","options","setValue","setCodeMode","placeholder","type","showFunctions","checked","checkedChildren","unCheckedChildren","TabPane","Tabs","ComponentList","defaultActiveKey","tabPosition","components","tab","MenuList","timerRef","outerDom","handlerMouseOver","clearTimeout","setVisible","handlerOut","setTimeout","visible","fieldMap","$input","$switch","$select","$radio","$number","$array","groupListRef","onRemove","align","$object","$avatar","$variable","label","$functions","render","Field","others","skey","labelHidden","Props","formRef","initProps","runValidate","actionRef","activeIdRef","fields","profilePropertyRender","formData","Panel","ActiveComponent","ghost","header","NodeTree","Toolbar","constructor","emit","this","console","EventEmitter","setStageSize","callback","codeMode","useStageParam","debug","debugRef","addListener","removeAllListeners","listeners","once","useEvent","wrap","flex","App","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.0a7ea5e6.chunk.js","sourcesContent":["import { preset as formReset } from '@kne/react-form-antd';\nimport get from 'lodash/get';\n\nexport const avatarParams = {\n  field: {\n    avatar: {\n      action: '/open-api/upload_static_file/view-editor',\n      transformResponse: response => {\n        return {\n          code: response.code,\n          msg: response.msg,\n          results: get(response, 'results[0].targetPath')\n        };\n      }\n    },\n    upload: {\n      action: '/open-api/upload_static_file/view-editor',\n      transformResponse: response => {\n        return {\n          code: response.code,\n          msg: response.msg,\n          results: get(response, 'results[0].targetPath')\n        };\n      }\n    }\n  }\n};\n\nformReset(avatarParams);","import { createContext, useContext } from 'react';\n\nconst context = createContext({});\n\nexport const { Provider, Consumer } = context;\n\nexport const useGlobal = () => {\n  return useContext(context);\n};\n\nexport default context;","import React from 'react';\nimport Render from '@kne/react-view-render';\nimport { useGlobal } from '../context';\nimport style from './style.module.scss';\n\nconst Page = () => {\n  const { content, emitter } = useGlobal();\n  return <div className={style['page']}>\n    <Render content={content} emitter={emitter}/>\n  </div>;\n};\n\nexport default Page;","import React, { useState, useRef, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport get from 'lodash/get';\nimport style from './style.module.scss';\n\nexport const useDrag = ({ onDrag }) => {\n  const [startDrag, setStartDrag] = useState(false);\n  const [local, setLocal] = useState(null);\n  const localRef = useRef(local);\n  const startLocalRef = useRef(null);\n  localRef.current = local;\n  const startDragRef = useRef(startDrag);\n  startDragRef.current = startDrag;\n  const onDragRef = useRef(onDrag);\n  onDragRef.current = onDrag;\n  useEffect(() => {\n    const mouseUpHandler = () => {\n      if (!startDragRef.current) {\n        return;\n      }\n\n      const getDistance = (a, b) => {\n        return Math.abs(get(a, 'y', 0) - get(b, 'y', 0)) + Math.abs(get(a, 'x', 0) - get(b, 'x', 0));\n      };\n\n      if (getDistance(localRef.current, startLocalRef.current) < 10) {\n        setStartDrag(false);\n        return;\n      }\n\n      if (localRef.current) {\n        onDragRef.current && onDragRef.current(localRef.current);\n      }\n      setStartDrag(false);\n      setLocal(null);\n    };\n\n    const mouseMoveHandler = (e) => {\n      if (!startDragRef.current) {\n        return;\n      }\n      setLocal({\n        x: e.clientX + document.documentElement.scrollLeft,\n        y: e.clientY + document.documentElement.scrollTop\n      });\n    };\n\n    document.addEventListener('mouseup', mouseUpHandler);\n    document.addEventListener('mousemove', mouseMoveHandler);\n    return () => {\n      document.removeEventListener('mouseup', mouseUpHandler);\n      document.removeEventListener('mousemove', mouseMoveHandler);\n    };\n  }, []);\n  return {\n    local,\n    startDrag,\n    onDragStart: (e) => {\n      startLocalRef.current = {\n        x: e.clientX + document.documentElement.scrollLeft,\n        y: e.clientY + document.documentElement.scrollTop\n      };\n      setStartDrag(true);\n    }\n  };\n};\n\nconst DragItem = ({ top, left }) => {\n  return createPortal(<div className={style['active-mirror']}\n                           style={{ top, left }}>\n    <svg className=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\"\n         height=\"20\" style={{ background: '#FFF' }}>\n      <path\n        d=\"M940.8 242.688L530.56 4.8c-11.2-6.4-25.6-6.4-36.736 0L83.584 242.688c-11.2 6.4-19.2 19.136-19.2 31.872V748.8c0 12.8 6.4 25.536 19.2 31.936l410.24 236.288c11.2 6.4 25.6 6.4 36.736 0L940.8 780.736c11.2-6.4 19.2-19.2 19.2-32V274.56c0-14.336-8-25.536-19.2-31.872z m-44.672 490.048L513.024 953.088 129.856 732.736V288.96L513.024 68.672 896.128 290.56V732.8z\"\n        fill=\"#1890FF\"/>\n      <path\n        d=\"M279.936 340.032a30.976 30.976 0 0 0-43.136 11.2c-7.936 14.336-3.2 35.136 11.2 43.072l233.088 135.68v268.224a32 32 0 0 0 31.936 31.936 32 32 0 0 0 31.872-31.936v-269.76l233.088-134.144c16-9.6 20.8-28.736 11.2-43.072-9.6-16-28.736-20.8-43.136-11.2l-233.024 134.08-233.088-134.08z\"\n        fill=\"#1890FF\"/>\n    </svg>\n  </div>, document.body);\n};\n\nexport default DragItem;","import React, { useCallback, useMemo, useState, useRef, useEffect } from 'react';\nimport DragItem, { useDrag } from '../common/DragItem';\nimport { useGlobal } from '../context';\nimport classnames from 'classnames';\nimport ResizeObserver from 'rc-resize-observer';\nimport { Space } from 'antd';\nimport { DeleteOutlined, EnterOutlined } from '@ant-design/icons';\nimport isNull from 'lodash/isNull';\nimport style from './style.module.scss';\n\nconst findTarget = (dom, target) => {\n  if (dom === document.body || isNull(dom)) {\n    return false;\n  }\n  if (dom === target) {\n    return true;\n  }\n  return findTarget(dom.parentElement, target);\n};\n\nconst ActiveObject = ({ children }) => {\n  const { emitter, active, action } = useGlobal();\n  const outerRef = useRef(null);\n  const outerLocalRef = useRef({ x: 0, y: 0 });\n  const activeDomRef = useRef(null);\n  const activeClickHandler = (e) => {\n    if (findTarget(e.target, activeDomRef.current)) {\n      return;\n    }\n\n    const rect = outerRef.current.getBoundingClientRect();\n    outerLocalRef.current = {\n      x: rect.left + document.documentElement.scrollLeft,\n      y: rect.top + document.documentElement.scrollTop\n    };\n    action.setActive({\n      x: e.clientX, y: e.clientY\n    });\n  };\n  const [optionsName, setOptionsName] = useState([]);\n  useEffect(() => {\n    if (!!active) {\n      outerLocalRef.current;\n      const rect = outerRef.current.getBoundingClientRect();\n      const { width, top, height } = activeDomRef.current.getBoundingClientRect();\n      const optionsLeft = active.local.left + active.local.width - width,\n        optionsTop = active.local.top + active.local.height;\n      const optionsName = [];\n      if (optionsLeft < 0) {\n        optionsName.push('left');\n      }\n      if (optionsTop + height + rect.top > rect.height) {\n        optionsName.push('top');\n      }\n      setOptionsName(optionsName.map((name) => style[name]));\n    }\n  }, [active]);\n\n  const { startDrag, local, onDragStart } = useDrag({\n    onDrag: (local) => {\n      if (!active) {\n        return;\n      }\n      action.placed({ componentId: active.id, local });\n    }\n  });\n\n  useEffect(() => {\n    const sub = emitter.addListener('drag-down', ({ local, data }) => {\n      if (!local) {\n        return;\n      }\n      action.append({ componentName: data.id, local });\n    });\n    return () => {\n      sub.remove();\n    };\n  }, [emitter, action.append]);\n\n  useEffect(() => {\n    const sub = emitter.addListener('component-appended', () => {\n      action.relocation();\n      action.removeActive();\n    });\n    const sub2 = emitter.addListener('component-removed', () => {\n      action.relocation();\n      action.removeActive();\n    });\n    const sub3 = emitter.addListener('relocation', () => {\n      action.relocation();\n    });\n    return () => {\n      sub.remove();\n      sub2.remove();\n      sub3.remove();\n    };\n  }, [emitter]);\n\n  return <ResizeObserver onResize={() => {\n    action.relocation();\n  }}>\n    <div className={style['active-outer']} ref={outerRef} onClick={activeClickHandler}>\n      {children}\n      {active ? <div className={style['active']} style={{\n        top: active.local.top - outerLocalRef.current.y,\n        left: active.local.left - outerLocalRef.current.x,\n        width: active.local.width,\n        height: active.local.height\n      }} onMouseDown={(e) => {\n        if (findTarget(e.target, activeDomRef.current)) {\n          return;\n        }\n        onDragStart(e);\n      }}>\n        {startDrag && local ?\n          <DragItem top={local.y} left={local.x}/> : null}\n        <div className={classnames(style['options'], ...optionsName)} ref={activeDomRef}>\n          <Space size={4}>\n            <div className={style['options-id']}>{active.id}</div>\n            <EnterOutlined className={style['options-btn']} onClick={action.selectParent}/>\n            <DeleteOutlined className={style['options-btn']} onClick={action.remove}/>\n          </Space>\n        </div>\n      </div> : null}\n    </div>\n  </ResizeObserver>;\n};\n\nexport default ActiveObject;","import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { ExpandOutlined, PlusOutlined, MinusOutlined } from '@ant-design/icons';\nimport { useGlobal } from '../context';\nimport debounce from 'lodash/debounce';\nimport classnames from 'classnames';\nimport Page from './Page';\nimport ActiveObject from './ActiveObject';\nimport style from './style.module.scss';\n\nconst getNodeOffset = (el) => {\n  let x = 0, y = 0;\n  do {\n    x += el.offsetLeft;\n    y += el.offsetTop;\n  }\n  while (el = el.offsetParent);\n\n  return { 'left': x, 'top': y };\n};\n\nconst Background = ({ scale, width: originWidth, height: originHeight }) => {\n  const canvasRef = useRef(null);\n  const { width, height } = useMemo(() => {\n    return {\n      width: originWidth * 100 / scale,\n      height: originHeight * 100 / scale\n    };\n  }, [originWidth, originHeight, scale]);\n  useEffect(() => {\n    const w = width * 2, h = height * 2;\n    const canvas = canvasRef.current,\n      context = canvas.getContext('2d');\n    context.clearRect(0, 0, w, h);\n    (() => {\n      context.fillStyle = '#ececec';\n      let x = 0;\n      while (x <= w) {\n        let y = 0;\n        while (y <= h) {\n          if ((x % 40 === 0 && y % 40 === 0) || (x % 40 !== 0 && y % 40 !== 0)) {\n            context.fillRect(x, y, 20, 20);\n          }\n          y += 20;\n        }\n        x += 20;\n      }\n    })();\n  }, [width, height]);\n  return <canvas className={classnames(style.axis, style.background)} ref={canvasRef} width={width * 2}\n                 height={height * 2}\n                 style={{ width, height }}/>;\n};\n\nconst Axis = ({ scale, width: originWidth, height: originHeight }) => {\n  const canvasRef = useRef(null);\n  const { width, height } = useMemo(() => {\n    return {\n      width: originWidth * 100 / scale,\n      height: originHeight * 100 / scale\n    };\n  }, [originWidth, originHeight, scale]);\n  useEffect(() => {\n    const w = width * 2, h = height * 2;\n    const canvas = canvasRef.current,\n      context = canvas.getContext('2d');\n    context.clearRect(0, 0, w, h);\n    (() => {\n      context.lineWidth = 1;\n      context.strokeStyle = '#314659';\n      context.fillStyle = '#314659';\n      context.font = '24px Arial';\n      context.textAlign = 'center';\n      context.textBaseline = 'middle';\n      context.beginPath();\n      let x = 0, y = 0;\n      while (x <= w) {\n        x += 10;\n        context.moveTo(x, 0);\n        context.lineTo(x, x % 200 === 0 ? 10 * 2 : 10);\n        if (x % 200 === 0) {\n          context.fillText(x / 2, x, 40);\n        }\n      }\n      while (y <= h) {\n        y += 10;\n        context.moveTo(0, y);\n        context.lineTo(y % 200 === 0 ? 10 * 2 : 10, y);\n        if (y % 200 === 0) {\n          context.fillText(y / 2, 45, y);\n        }\n      }\n      context.stroke();\n    })();\n  }, [width, height]);\n  return <canvas className={style.axis} ref={canvasRef} width={width * 2} height={height * 2}\n                 style={{ width, height }}/>;\n};\n\nconst Guideline = ({ scale, width: originWidth, height: originHeight }) => {\n  const scaleRef = useRef(scale);\n  scaleRef.current = scale;\n  const [lines, setLines] = useState([]);\n  const canvasRef = useRef(null);\n  const { width, height } = useMemo(() => {\n    return {\n      width: originWidth * 100 / scale,\n      height: originHeight * 100 / scale\n    };\n  }, [originWidth, originHeight, scale]);\n  useEffect(() => {\n    let startX = false, startY = false;\n    const { left, top } = getNodeOffset(canvasRef.current);\n    const handlerMouseDown = (e) => {\n      const x = e.clientX - left + document.documentElement.scrollLeft,\n        y = e.clientY - top + document.documentElement.scrollTop;\n      if (y < 10) {\n        startX = true;\n        setLines((lines) => {\n          const newLines = lines.filter(({ active }) => !active).slice(0);\n          newLines.push({\n            position: y * 100 / scaleRef.current,\n            direction: 'horizontal',\n            active: true\n          });\n          return newLines;\n        });\n        return;\n      }\n      if (x < 10) {\n        startY = true;\n        setLines((lines) => {\n          const newLines = lines.filter(({ active }) => !active).slice(0);\n          newLines.push({\n            position: x * 100 / scaleRef.current,\n            direction: 'vertical',\n            active: true\n          });\n          return newLines;\n        });\n        return;\n      }\n\n      setLines((lines) => {\n        const active = lines.find((line) => {\n          return line.direction === 'horizontal' && Math.abs(y * 100 / scaleRef.current - line.position) < 2 || line.direction === 'vertical' && Math.abs(x * 100 / scaleRef.current - line.position) < 2;\n        });\n        if (active) {\n          const newLines = lines.slice(0);\n          if (active.direction === 'horizontal') {\n            startX = true;\n          }\n          if (active.direction === 'vertical') {\n            startY = true;\n          }\n          const index = lines.indexOf(active);\n          newLines[index] = Object.assign({}, active, { active: true });\n          return newLines;\n        }\n        return lines;\n      });\n    };\n\n    const handlerMouseMove = (e) => {\n      const x = e.clientX - left + document.documentElement.scrollLeft,\n        y = e.clientY - top + document.documentElement.scrollTop;\n      if (startX) {\n        setLines((lines) => {\n          const newLines = lines.slice(0);\n          const activeLine = lines.find(({ active, direction }) => active && direction === 'horizontal');\n          if (activeLine) {\n            const index = newLines.indexOf(activeLine);\n            newLines[index] = Object.assign({}, activeLine, { position: y * 100 / scaleRef.current });\n          }\n          return newLines;\n        });\n        return;\n      }\n      if (startY) {\n        setLines((lines) => {\n          const newLines = lines.slice(0);\n          const activeLine = lines.find(({ active, direction }) => active && direction === 'vertical');\n          if (activeLine) {\n            const index = newLines.indexOf(activeLine);\n            newLines[index] = Object.assign({}, activeLine, { position: x * 100 / scaleRef.current });\n          }\n          return newLines;\n        });\n      }\n    };\n\n    const handlerMouseUp = (e) => {\n      startX = false;\n      startY = false;\n      setLines((lines) => {\n        const newLines = lines.filter(({ position }) => position > 10).map((item) => {\n          return Object.assign({}, item, { active: false });\n        });\n        return newLines;\n      });\n    };\n    document.body.addEventListener('mousedown', handlerMouseDown, true);\n    document.body.addEventListener('mousemove', handlerMouseMove, true);\n    document.body.addEventListener('mouseup', handlerMouseUp, true);\n    document.body.addEventListener('mouseleave', handlerMouseUp, false);\n    return () => {\n      document.body.removeEventListener('mousedown', handlerMouseDown, true);\n      document.body.removeEventListener('mousemove', handlerMouseMove, true);\n      document.body.removeEventListener('mouseup', handlerMouseUp, true);\n      document.body.addEventListener('mouseleave', handlerMouseUp, false);\n    };\n  }, []);\n  useEffect(() => {\n    const w = width * 2, h = height * 2;\n    const canvas = canvasRef.current,\n      context = canvas.getContext('2d');\n    context.clearRect(0, 0, w, h);\n    context.lineWidth = 1;\n    context.strokeStyle = 'cyan';\n    context.beginPath();\n    lines.forEach((line) => {\n      if (line.direction === 'horizontal') {\n        context.moveTo(0, line.position * 2);\n        context.lineTo(w, line.position * 2);\n      }\n      if (line.direction === 'vertical') {\n        context.moveTo(line.position * 2, 0);\n        context.lineTo(line.position * 2, h);\n      }\n    });\n    context.stroke();\n  }, [width, height, lines]);\n  return <canvas className={style.axis} ref={canvasRef} width={width * 2} height={height * 2}\n                 style={{ width, height }}/>;\n};\n\nconst Scaler = () => {\n  const { setStageScale: setScale, stageScale: scale } = useGlobal();\n  return <div className={style['scaler']}>\n    <div className={style.btn} onClick={() => {\n      setScale((scale) => {\n        return scale - 10;\n      });\n    }}><MinusOutlined/>\n    </div>\n    <div className={style['scale-value']}>{scale}%</div>\n    <div className={style.btn} onClick={() => {\n      setScale((scale) => {\n        return scale + 10;\n      });\n    }}><PlusOutlined/>\n    </div>\n    <div className={style.btn} onClick={() => {\n      setScale(() => {\n        return 100;\n      });\n    }}><ExpandOutlined/>\n    </div>\n  </div>;\n};\n\nconst Stage = ({ className }) => {\n  const { stageScale: scale, stageSize } = useGlobal();\n  const [size, setSize] = useState({ width: 500, height: 500 });\n  const [pagePosition, setPagePosition] = useState(0);\n  useEffect(() => {\n    const left = (size.width - pageRef.current.clientWidth) / 2;\n    setPagePosition(left);\n  }, [size, stageSize]);\n  const containerRef = useRef(null);\n  const pageRef = useRef(null);\n  useEffect(() => {\n    const resize = () => {\n      setSize({\n        width: containerRef.current.scrollWidth,\n        height: containerRef.current.scrollHeight\n      });\n    };\n    resize();\n    const resizeHandler = debounce(resize, 300);\n    window.addEventListener('resize', resizeHandler);\n    return () => window.removeEventListener('resize', resizeHandler);\n  }, []);\n  return <div ref={containerRef} className={classnames(style.stage, className)}>\n    <div style={{ width: size.width, height: size.height, overflow: 'hidden' }}>\n      <div className={style.content} style={{ transform: `scale(${scale / 100})` }}>\n        <Background width={size.width} scale={scale} height={size.height}/>\n      </div>\n      <div className={style.content} style={{ transform: `scale(${scale / 100})`, transformOrigin: '50% 50%' }}>\n        <div ref={pageRef} className={style['page-position']} style={{\n          width: stageSize,\n          top: 0,\n          left: pagePosition\n        }}>\n          <ActiveObject>\n            <Page/>\n          </ActiveObject>\n        </div>\n      </div>\n      <div className={style.content} style={{ transform: `scale(${scale / 100})` }}>\n        <Axis width={size.width} scale={scale} height={size.height}/>\n        <Guideline width={size.width} scale={scale} height={size.height}/>\n      </div>\n    </div>\n    <Scaler/>\n  </div>;\n};\n\nexport default Stage;","import React, { useRef, useEffect, useState } from 'react';\nimport MonacoEditor from 'react-monaco-editor';\nimport classnames from 'classnames';\nimport { useGlobal } from '../context';\nimport ResizeObserver from 'rc-resize-observer';\n\nconst CodeMode = ({ className }) => {\n  const { content, action } = useGlobal();\n  const [code, setCode] = useState(JSON.stringify(content, null, 2));\n  const [size, setSize] = useState({ width: 400, height: 400 });\n  const ref = useRef(null);\n\n  const setContentRef = useRef(null);\n  setContentRef.current = () => {\n    action.setContent(JSON.parse(code));\n  };\n\n  useEffect(() => {\n    setSize({\n      width: ref.current.clientWidth,\n      height: ref.current.clientHeight\n    });\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      setContentRef.current();\n    };\n  }, []);\n\n  return <ResizeObserver onResize={() => {\n    setSize({\n      width: ref.current.clientWidth,\n      height: ref.current.clientHeight\n    });\n  }}>\n    <div className={classnames(className)} ref={ref}>\n      <MonacoEditor\n        width={size.width}\n        height={size.height}\n        language=\"javascript\"\n        value={code}\n        onChange={(value) => {\n          setCode(value);\n        }}\n      />\n    </div>\n  </ResizeObserver>;\n};\n\nexport default CodeMode;","import React, { useState, useRef, useMemo } from 'react';\nimport get from 'lodash/get';\nimport { profileMap } from '@kne/react-view-render';\nimport uniqueId from 'lodash/uniqueId';\nimport { message, Modal } from 'antd';\nimport findIndex from 'lodash/findIndex';\nimport isPlainObject from 'lodash/isPlainObject';\nimport Ajv from 'ajv';\n\n\nconst ajv = new Ajv();\n\nconst computedActiveComponent = ({ list, state, local }) => {\n  const { x, y } = local;\n  const clickLeft = x + document.documentElement.scrollLeft,\n    clickTop = y + document.documentElement.scrollTop;\n  return list.find(({ id }) => {\n    if (!state[id]) {\n      return false;\n    }\n    const local = state[id].local;\n    return clickLeft > local.x && clickLeft < local.x + local.w && clickTop > local.y && clickTop < local.y + local.h;\n  });\n};\n\nconst computedComponentAddress = ({ list, state, componentName, local }) => {\n  // 先寻找最小父级\n  const parent = (() => {\n    const localParent = computedActiveComponent({ list, state, local });\n\n    const findParent = (parentId) => {\n      if (!parentId) {\n        return null;\n      }\n      const parent = list.find(({ id }) => id === parentId);\n      if (!parent) {\n        return null;\n      }\n      const allow = get(profileMap[parent.component], 'children.allow');\n\n      if (allow && allow.indexOf(componentName) === -1) {\n        return findParent(parent.parentId);\n      }\n      return parent;\n    };\n\n    const parent = findParent(get(localParent, 'id', null));\n    if (!parent) {\n      return null;\n    }\n    return parent;\n  })();\n\n  // 查找所有子节点,计算index\n  const index = (() => {\n    const children = list.filter(({ parentId }) => parentId === get(parent, 'id', null));\n    if (children.length === 0) {\n      return list.length;\n    }\n    const computedDistance = (x, y) => {\n      return Math.sqrt(x * x + y * y);\n    };\n    const item = children.find(({ id }) => {\n      if (!state[id]) {\n        return false;\n      }\n      const childLocal = state[id].local;\n      return computedDistance(childLocal.x, childLocal.y) - computedDistance(local.x, local.y) > 0;\n    });\n    if (item) {\n      return children.indexOf(item) + list.indexOf(children[0]);\n    }\n    return list.length;\n  })();\n\n  return { parent, index };\n};\n\nconst verifyComponent = ({ componentData, list }) => {\n  const dependence = get(profileMap[componentData.component], 'children.dependence');\n  const forbid = get(profileMap[componentData.component], 'children.forbid');\n\n  const findTree = (id, dependence) => {\n    if (!id) {\n      return false;\n    }\n    const item = [componentData, ...list].find((item) => {\n      return id === item.id;\n    });\n    if (!item) {\n      return false;\n    }\n\n    const parent = list.find((node) => {\n      return item.parentId === node.id && dependence.indexOf(node.component) > -1;\n    });\n\n    if (parent) {\n      return true;\n    }\n    return findTree(item.parentId, dependence);\n  };\n\n  return dependence && dependence.length > 0 && findTree(componentData.id, dependence) === false || forbid && forbid.length > 0 && findTree(componentData.id, forbid);\n};\n\nconst decorateComponent = ({ componentData, local, list, state }) => {\n  componentData = Object.assign({}, componentData);\n  const { parent, index } = computedComponentAddress({ list, state, componentName: componentData.component, local });\n\n  if (parent) {\n    componentData.parentId = parent.id;\n    componentData.depth = parent.depth + 1;\n  } else {\n    componentData.parentId = null;\n    componentData.depth = 0;\n  }\n\n  return { componentData, index };\n};\n\nconst generateTreeData = ({ list }) => {\n  const newData = list.slice(0);\n  const makeTree = (nodes, output = []) => {\n    nodes.forEach((node) => {\n      const { depth, parentId, ...item } = node;\n      const children = newData.filter(({ parentId }) => parentId === node['id']).sort((a, b) => a.index - b.index);\n      if (children && children.length > 0) {\n        item.children = makeTree(children);\n      }\n      output.push(item);\n    });\n    return output;\n  };\n  const roots = newData.filter(({ parentId }) => !(parentId && newData.find(({ id }) => id === parentId)));\n  return makeTree(roots);\n};\n\nconst parseTreeData = (treeData) => {\n  const output = [];\n  const core = (list, parentId, depth = 0) => {\n    list.forEach((node) => {\n      output.push({\n        component: node.component,\n        depth,\n        id: node.id,\n        parentId: parentId,\n        props: Object.assign({}, node.props, typeof node.children === 'string' ? { children: node.children } : {})\n      });\n      if (Array.isArray(node.children)) {\n        core(node.children, node.id, depth + 1);\n      }\n    });\n  };\n  core(treeData);\n  return generateListData({list:output});\n};\n\nconst generateListData = ({ list }) => {\n  return list.sort((a, b) => {\n    return b.depth - a.depth;\n  });\n};\n\nconst computedState = ({ list }) => {\n  const output = {};\n  list.forEach(({ id }) => {\n    const targetDom = document.querySelector(`.id_${id}`);\n    if (!targetDom) {\n      return;\n    }\n    const rect = targetDom.getBoundingClientRect();\n    window.getComputedStyle(targetDom).zIndex;\n    const local = {\n      x: rect.left + document.documentElement.scrollLeft,\n      y: rect.top + document.documentElement.scrollTop,\n      w: rect.width,\n      h: rect.height\n    };\n    output[id] = {\n      id,\n      local\n    };\n  });\n  return output;\n};\n\n\nconst useComponentState = () => {\n  const [componentList, setComponentList] = useState([]);\n  const [componentState, setComponentState] = useState({});\n  const [functions, setFunctions] = useState({});\n  const [variable, setVariable] = useState({});\n  const [active, setActive] = useState(null);\n\n  const componentListRef = useRef(componentList);\n  const componentStateRef = useRef(componentState);\n  componentListRef.current = componentList;\n  componentStateRef.current = componentState;\n\n  const treeData = useMemo(() => {\n    return generateTreeData({ list: componentList });\n  }, [componentList]);\n\n  const append = ({ componentName, local }) => {\n    const { componentData, index } = decorateComponent({\n      componentData: {\n        id: uniqueId(`${componentName}-`),\n        component: componentName,\n        props: get(profileMap, `${componentName}.defaultProps`, {}),\n        parentId: null,\n        depth: 0\n      }, local,\n      list: componentListRef.current, state: componentStateRef.current\n    });\n\n    if (verifyComponent({ componentData, list: componentListRef.current })) {\n      message.warning('组件不能放置在该位置');\n      return;\n    }\n    setComponentList((list) => {\n      const newData = list.slice(0);\n      newData.splice(index, 0, componentData);\n      return generateListData({ list: newData });\n    });\n    setActive(null);\n  };\n  const placed = ({ componentId, local }) => {\n    const prevComponent = componentListRef.current.find((item) => item.id === componentId);\n    if (!prevComponent) {\n      return;\n    }\n    const { componentData, index } = decorateComponent({\n      componentData: prevComponent, local,\n      list: componentListRef.current, state: componentStateRef.current\n    });\n\n    //检查被移动的组件不能是目标组件的父级\n    const parentIsAllowed = (id, parentId) => {\n      if (!parentId) {\n        return true;\n      }\n      if (id === parentId) {\n        return false;\n      }\n      const parent = componentListRef.current.find((item) => item.id === parentId);\n      if (!parent) {\n        return false;\n      }\n      if (parent.parentId === id) {\n        return false;\n      }\n\n      return parentIsAllowed(id, parent.parentId);\n    };\n\n    if (!parentIsAllowed(componentData.id, componentData.parentId)) {\n      return;\n    }\n\n    if (verifyComponent({ componentData, list: componentListRef.current })) {\n      message.warning('组件不能放置在该位置');\n      return;\n    }\n    setComponentList((list) => {\n      const prevIndex = findIndex(list, (item) => item.id === componentId);\n      const newList = list.slice(0);\n      newList.splice(prevIndex, 1);\n      newList.splice(index, 0, componentData);\n      return generateListData({ list: newList });\n    });\n    setActive(null);\n    relocation();\n  };\n  const remove = () => {\n    Modal.confirm({\n      content: '确定要删除该组件件及其子组件吗？',\n      okText: '确定',\n      cancelText: '取消',\n      onOk: () => {\n        setComponentList((list) => {\n          const findTreeListChildrenIndex = (id) => {\n            const output = [];\n            output.push(id);\n            list.filter((item) => item.parentId === id).forEach(({ id }) => {\n              output.push(...findTreeListChildrenIndex(id));\n            });\n            return output;\n          };\n          const newList = list.slice(0);\n          findTreeListChildrenIndex(active).forEach((id) => {\n            const index = findIndex(newList, (item) => item.id === id);\n            newList.splice(index, 1);\n          });\n\n          return generateListData({ list: newList });\n        });\n        setActive(null);\n      }\n    });\n  };\n  const relocation = () => {\n    setComponentState(computedState({ list: componentListRef.current }));\n  };\n  const removeActive = () => {\n    setActive(null);\n  };\n  const setActiveComponent = (local) => {\n    const activeComponent = computedActiveComponent({\n      list: componentListRef.current,\n      state: componentStateRef.current,\n      local\n    });\n\n    if (!activeComponent) {\n      setActive(null);\n      return;\n    }\n    setActive(activeComponent.id);\n  };\n  const selectParent = () => {\n    if (!active) {\n      return;\n    }\n    const prevComponent = componentListRef.current.find(({ id }) => id === active);\n    if (!prevComponent) {\n      setActive(null);\n      return;\n    }\n    const parentComponent = componentListRef.current.find(({ id }) => id === prevComponent.parentId);\n    if (!parentComponent) {\n      setActive(null);\n      return;\n    }\n    setActive(parentComponent.id);\n  };\n  const setContent = (content) => {\n    const { variable, functions, data } = Object.assign({}, content);\n    setVariable(variable);\n    setFunctions(functions);\n    const list = parseTreeData(data);\n    setComponentList(list);\n    componentListRef.current = list;\n    relocation();\n  };\n  const computedActive = useMemo(() => {\n    if (!active) {\n      return null;\n    }\n    const activeComponent = componentList.find(({ id }) => id === active);\n    if (!activeComponent) {\n      return null;\n    }\n    const state = componentState[activeComponent.id];\n\n    if (!state) {\n      return null;\n    }\n\n    return {\n      local: {\n        top: state.local.y,\n        left: state.local.x,\n        width: state.local.w,\n        height: state.local.h\n      },\n      id: activeComponent.id,\n      component: activeComponent.component\n    };\n  }, [active, componentList, componentState]);\n\n  const setProps = (id, props = {}) => {\n    const componentData = componentList.find((item) => item.id === id);\n    if (!componentData) {\n      return;\n    }\n    const { property: configProps } = profileMap[componentData.component];\n    const output = {};\n    Object.keys(configProps).forEach((key) => {\n      let value = props[key];\n      const jsonschema = get(configProps, `[${key}].jsonschema`);\n      if (jsonschema) {\n        const validate = ajv.compile(jsonschema);\n        if (!validate(value)) {\n          return;\n        }\n      }\n      output[key] = value;\n    });\n    setComponentList((list) => {\n      const componentData = list.find((item) => item.id === id);\n      const index = list.indexOf(componentData);\n      const newList = list.slice(0);\n      const newProps = Object.assign({}, componentData.props, output);\n      Object.keys(newProps).filter((key) => newProps[key] === '' || newProps[key] === void (0)).forEach((key) => {\n        delete newProps[key];\n      });\n      newList.splice(index, 1, Object.assign({}, componentData, { props: newProps }));\n      return newList;\n    });\n    relocation();\n  };\n  return {\n    active: computedActive,\n    componentList,\n    content: useMemo(() => {\n      return {\n        variable,\n        functions,\n        data: treeData\n      };\n    }, [variable, functions, treeData]),\n    action: {\n      append,\n      placed,\n      remove,\n      relocation,\n      setActive: setActiveComponent,\n      setProps,\n      removeActive,\n      selectParent,\n      setVariable,\n      setFunctions,\n      setContent\n    }\n  };\n};\n\nexport default useComponentState;","import React, { useState } from 'react';\nimport MonacoEditor from 'react-monaco-editor';\nimport { withLayer } from '@kne/antd-enhance';\nimport { Modal, message } from 'antd';\n\nconst showVariable = withLayer(({ code, onChange, options, close, ...props }) => {\n  const [value, setValue] = useState(JSON.stringify(code, null, 2));\n  return <Modal {...props} title=\"变量定义\" width={848} onOk={() => {\n    try {\n      onChange(JSON.parse(value));\n      close();\n    } catch (e) {\n      message.error('JSON转换错误');\n    }\n  }}>\n    <MonacoEditor\n      width=\"800\"\n      height=\"400\"\n      language=\"json\"\n      value={value}\n      options={options}\n      onChange={setValue}\n    />\n  </Modal>;\n});\n\nexport default showVariable;","import React, { useState } from 'react';\nimport MonacoEditor from 'react-monaco-editor';\nimport { withLayer } from '@kne/antd-enhance';\nimport { Modal, message } from 'antd';\n\nconst showVariable = withLayer(({ code, onChange, options, close, ...props }) => {\n  const [value, setValue] = useState(JSON.stringify(code,null,2));\n  return <Modal {...props} title=\"函数定义\" width={848} onOk={() => {\n    try {\n      onChange(JSON.parse(value));\n      close();\n    } catch (e) {\n      message.error('JSON转换错误');\n    }\n  }}>\n    <MonacoEditor\n      width=\"800\"\n      height=\"400\"\n      language=\"javascript\"\n      value={value}\n      options={options}\n      onChange={setValue}\n    />\n  </Modal>;\n});\n\nexport default showVariable;","import React from 'react';\nimport { Button, Space, Select, Switch } from 'antd';\nimport { useGlobal } from '../context';\nimport showVariable from './showVariable';\nimport showFunctions from './showFunctions';\nimport style from './style.module.scss';\n\nexport default () => {\n  const { stageSize, setStageSize, content, action, codeMode, setCodeMode } = useGlobal();\n  return <div className={style.nav}>\n    <Space>\n      <span>页面类型:</span>\n      <Select value={stageSize} onChange={setStageSize} placeholder=\"请选择类型\">\n        <Select.Option value='100%'>自适应</Select.Option>\n        <Select.Option value='1366px'>PC端</Select.Option>\n        <Select.Option value='375px'>iPhone 6/7/8</Select.Option>\n        <Select.Option value='414px'>iPhone 6/7/8 Plus</Select.Option>\n        <Select.Option value='768px'>iPad</Select.Option>\n        <Select.Option value='1024px'>iPad Pro</Select.Option>\n      </Select>\n      <Button type=\"link\" onClick={() => {\n        showFunctions({\n          code: content.functions,\n          onChange: (variable) => {\n            action.setFunctions(variable);\n          }\n        });\n      }}>函数</Button>\n      <Button type=\"link\" onClick={() => {\n        showVariable({\n          code: content.variable,\n          onChange: (variable) => {\n            action.setVariable(variable);\n          }\n        });\n      }}>变量</Button>\n      <Switch checked={codeMode} onChange={setCodeMode} checkedChildren=\"代码模式\" unCheckedChildren=\"可视化模式\"/>\n    </Space>\n  </div>;\n};\n","import React, { useRef } from 'react';\nimport MirrorDragItem, { useDrag } from '../common/DragItem';\nimport { Tabs, Space } from 'antd';\nimport { profile } from '@kne/react-view-render';\nimport style from './style.module.scss';\nimport { useGlobal } from '../context';\n\nconst TabPane = Tabs.TabPane;\n\nconst DragItem = ({ className, data, children }) => {\n  const { emitter } = useGlobal();\n  const { startDrag, local, onDragStart } = useDrag({\n    onDrag: (local) => {\n      emitter.emit('drag-down', { local, data });\n    }\n  });\n  return <div className={className} onMouseDown={onDragStart}>\n    {children}\n    {startDrag && local ? <MirrorDragItem left={local.x} top={local.y}/> : null}\n  </div>;\n};\n\nconst ComponentList = () => {\n  return (\n    <Tabs className={style['component-list']} defaultActiveKey=\"1\" tabPosition=\"left\" type=\"card\">\n      {Object.values(profile).map(({ id, label, components }) => {\n        return <TabPane tab={label} key={id}>\n          <Space className={style['component-container']}>\n            {components.map((item) => {\n              const { name, id } = item;\n              return <DragItem key={id} className={style['component-item']} data={item}>{name}</DragItem>;\n            })}\n          </Space>\n        </TabPane>;\n      })}\n    </Tabs>\n  );\n};\n\nexport default ComponentList;","import React, { useState, useRef, useEffect } from 'react';\nimport { PlusCircleOutlined } from '@ant-design/icons';\nimport classnames from 'classnames';\nimport ComponentList from './ComponentList';\nimport style from './style.module.scss';\n\nconst MenuList = () => {\n  const [visible, setVisible] = useState(false);\n  const timerRef = useRef(null);\n  const outerDom = useRef(null);\n\n  useEffect(() => {\n    const handlerMouseOver = () => {\n      clearTimeout(timerRef.current);\n      setVisible(true);\n    };\n    const handlerOut = () => {\n      timerRef.current = setTimeout(() => {\n        setVisible(false);\n      }, 300);\n    };\n\n    outerDom.current.addEventListener('mouseover', handlerMouseOver);\n    outerDom.current.addEventListener('mouseout', handlerOut);\n    return () => {\n      outerDom.current && outerDom.current.removeEventListener('mouseover', handlerMouseOver);\n      outerDom.current && outerDom.current.removeEventListener('mouseout', handlerOut);\n    };\n  }, []);\n\n  return <div className={style['menu-list']} ref={outerDom}>\n    <div className={classnames(style['menu'], {\n      [style['active']]: visible\n    })}>\n      <ComponentList/>\n    </div>\n    <div className={style['list-inner']}>\n      <div className={style['add']}>\n        <PlusCircleOutlined className={style['anticon']}/> 添加内容\n      </div>\n    </div>\n  </div>;\n};\n\nexport default MenuList;","import React, { useRef } from 'react';\nimport { PlusCircleOutlined, MinusCircleOutlined } from '@ant-design/icons';\nimport {\n  GroupList,\n  Input,\n  Avatar,\n  InputNumber,\n  RadioGroup,\n  Select,\n  Switch,\n  useFormContext\n} from '@kne/react-form-antd';\nimport get from 'lodash/get';\nimport { Button, Space } from 'antd';\nimport { useGlobal } from '../context';\nimport style from './style.module.scss';\n\nconst ArrayInput = ({ name, label, children }) => {\n  const groupListRef = useRef(null);\n  return (\n    <Space direction=\"vertical\">\n      <Space>\n        <div className={style['array-input-label']}>{label}</div>\n        <Button className={style['array-input-btn']} type=\"text\" onClick={() => {\n          groupListRef.current.onAdd();\n        }}><PlusCircleOutlined/></Button>\n      </Space>\n      <GroupList ref={groupListRef} name={name}>{(index, { onRemove }) => {\n        return <Space align=\"start\">\n          {children}\n          <Button className={style['array-input-btn']} type=\"text\" onClick={() => {\n            onRemove(index);\n          }}><MinusCircleOutlined/></Button>\n        </Space>;\n      }}</GroupList>\n    </Space>\n  );\n};\n\nconst ObjectInput = ({ label, children }) => {\n  return <div>\n    <div>{label}</div>\n    <div>\n      {children}\n    </div>\n  </div>;\n};\n\nconst VariableSelect = (props) => {\n  const { content } = useGlobal();\n  return <Select {...props} options={Object.keys(get(content, 'variable', {})).map((value) => {\n    return {\n      label: value,\n      value: value\n    };\n  })}/>;\n};\n\nconst $FunctionsSelect = (props) => {\n  const { content } = useGlobal();\n  return <Select {...props} options={Object.keys(get(content, 'functions', {})).map((value) => {\n    return {\n      label: value,\n      value: value\n    };\n  })}/>;\n};\n\nconst fieldMap = {\n  $input: Input,\n  $switch: Switch,\n  $select: Select,\n  $radio: RadioGroup,\n  $number: InputNumber,\n  $array: ArrayInput,\n  $object: ObjectInput,\n  $avatar: Avatar,\n  $variable: VariableSelect,\n  $functions: $FunctionsSelect\n};\n\nconst render = (property) => {\n  return Object.keys(property).map((key) => {\n    const props = property[key];\n    const Field = fieldMap[props['input-type']];\n    const others = Object.assign({}, get(props, 'input-options'));\n    if (props['input-type'] === '$array') {\n      others.children = render({ [key]: get(others, 'children', {}) });\n    }\n    if (props['input-type'] === '$object') {\n      const output = {};\n      Object.keys(others).forEach((skey) => {\n        output[`${key}.${skey}`] = others[skey];\n      });\n      others.children = render(output);\n    }\n    if (props['input-type'] === '$multiple') {\n      others.options = get(others, 'options', {}).map((item) => {\n        return {\n          children: render({\n            [key]: Object.assign({}, item, {\n              label: props.label,\n              labelHidden: true\n            })\n          }),\n          label: item.label\n        };\n      });\n    }\n    if (!Field) {\n      return null;\n    }\n    return <Field key={key} name={key} label={props.label} {...others}/>;\n  });\n};\n\nexport default render;","import React, { useMemo, useRef, useEffect } from 'react';\nimport { useGlobal } from '../context';\nimport { profileMap } from '@kne/react-view-render';\nimport profilePropertyRender from './profilePropertyRender';\nimport Form from '@kne/react-form-antd';\nimport get from 'lodash/get';\n\n\nconst Props = () => {\n  const { active, componentList, action } = useGlobal();\n  const formRef = useRef(null);\n  const componentListRef = useRef(componentList);\n  componentListRef.current = componentList;\n  useEffect(() => {\n    const initProps = get(componentListRef.current.find((item) => item.id === active.id), 'props', {});\n    formRef.current.emitter.emit('form-data-reset');\n    formRef.current.emitter.emit('form-data-set', {\n      data: initProps,\n      runValidate: false\n    });\n  }, [active.id]);\n  const actionRef = useRef(action);\n  actionRef.current = action;\n  const activeIdRef = useRef(null);\n  activeIdRef.current = active.id;\n  const { property } = profileMap[active.component];\n\n  const fields = useMemo(() => {\n    return profilePropertyRender(property);\n  }, [property]);\n\n  useEffect(() => {\n    const sub = formRef.current.emitter.addListener('form-field-data-change', () => {\n      setTimeout(() => {\n        const formData = formRef.current.data;\n        activeIdRef.current && actionRef.current.setProps(activeIdRef.current, formData);\n      });\n    });\n    return () => {\n      sub.remove();\n    };\n  }, []);\n  return (\n    <Form ref={formRef} type=\"inner\">\n      {fields}\n    </Form>\n  );\n};\n\nexport default Props;","import React, { Fragment } from 'react';\nimport { useGlobal } from '../context';\nimport { Collapse, Space, Tabs } from 'antd';\nimport { profileMap } from '@kne/react-view-render';\nimport Props from './Props';\nimport style from './style.module.scss';\n\nconst { Panel } = Collapse;\nconst { TabPane } = Tabs;\n\nconst ActiveComponent = () => {\n  const { active } = useGlobal();\n  if (!active) {\n    return '请选择左侧进行编辑...';\n  }\n  return <>\n    <Space className={style['title']}>\n      <div>ID:{active.id}</div>\n      <div>组件:{profileMap[active.component].name}({active.component})</div>\n    </Space>\n    <Collapse defaultActiveKey='1' ghost className={style['collapse']}>\n      <Panel header=\"属性\" key=\"1\">\n        <Props/>\n      </Panel>\n      <Panel header=\"样式\" key=\"2\">\n        <p>xxxxx</p>\n      </Panel>\n    </Collapse>\n  </>;\n};\n\nconst NodeTree = () => {\n  return <div>\n    xxxxxx\n  </div>;\n};\n\nconst Toolbar = () => {\n  return <Tabs className={style['toolbar']} defaultActiveKey=\"1\">\n    <TabPane tab=\"当前节点\" key=\"1\">\n      <ActiveComponent/>\n    </TabPane>\n    <TabPane tab=\"节点树\" key=\"2\">\n      <NodeTree/>\n    </TabPane>\n  </Tabs>;\n};\n\nexport default Toolbar;","import { useRef, useMemo } from 'react';\nimport fbemitter from 'fbemitter';\n\nconst { EventEmitter } = fbemitter;\n\nclass FormEventEmitter extends EventEmitter {\n  constructor(debug) {\n    super();\n    this.debug = debug;\n  }\n\n  emit(...args) {\n    if (this.debug) {\n      console.log('[react-view-editor][debug]:', ...args);\n    }\n    super.emit(...args);\n  }\n}\n\nconst useEvent = debug => {\n  const debugRef = useRef(debug);\n  return useMemo(() => {\n    const emitter = new FormEventEmitter(debugRef.current);\n    return {\n      addListener: (...args) => emitter.addListener(...args),\n      emit: (...args) => emitter.emit(...args),\n      removeAllListeners: (...args) => emitter.removeAllListeners(...args),\n      listeners: (...args) => emitter.listeners(...args),\n      once: (...args) => emitter.once(...args)\n    };\n  }, []);\n};\n\nexport default useEvent;\n","import './preset';\nimport React from 'react';\nimport { Provider } from './context';\nimport Stage from './Stage';\nimport CodeMode from './CodeMode';\nimport useStageParam from './hooks/useStageParam';\nimport useComponentState from './hooks/useComponentState';\nimport Nav from './Nav';\nimport MenuList from './MenuList';\nimport Toolbar from './Toolbar';\nimport { Col, Row } from 'antd';\nimport useEvent from './hooks/useEvent';\nimport style from './style.module.scss';\nimport 'antd/dist/antd.css';\n\nconst ViewEditor = () => {\n  const { setStageScale, stageScale, stageSize, setStageSize, codeMode, setCodeMode } = useStageParam();\n  const { active, content, componentList, action } = useComponentState();\n  const emitter = useEvent();\n  return (\n    <Provider value={{\n      componentList,\n      content,\n      emitter,\n      active,\n      action,\n      stageScale,\n      setStageScale,\n      codeMode,\n      setCodeMode,\n      stageSize,\n      setStageSize\n    }}>\n      <Row wrap={false} className={style.body}>\n        <Col flex=\"auto\" className={style.column}>\n          <Nav/>\n          <Row wrap={false} className={style.main}>\n            {codeMode ? null : <Col flex=\"40px\" className={style.menu}><MenuList/></Col>}\n            <Col flex=\"auto\">\n              {codeMode ? <CodeMode className={style.stage}/> : <Stage className={style.stage}/>}\n            </Col>\n          </Row>\n        </Col>\n        {codeMode ? null : <Col flex=\"280px\">\n          <Toolbar/>\n        </Col>}\n      </Row>\n    </Provider>\n  );\n};\n\nexport default ViewEditor;","import { useState } from 'react';\n\nconst useStateParam = () => {\n  const [scale, setScale] = useState(100);\n  const [size, setSize] = useState('100%');\n  const [codeMode, setCodeMode] = useState(false);\n  return {\n    stageScale: scale, stageSize: size, setStageSize: setSize, setStageScale: (callback) => {\n      return setScale((scale) => {\n        const value = callback(scale);\n        if (value < 20) {\n          return 20;\n        }\n        if (value > 200) {\n          return 200;\n        }\n        return value;\n      });\n    }, codeMode, setCodeMode\n  };\n};\n\nexport default useStateParam;","import ViewEditor from '@kne/react-view-editor';\n\nfunction App() {\n  return (\n    <ViewEditor />\n  );\n}\n\nexport default App;","import './index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport '@kne/react-view-editor/dist/index.css';\n\nReactDOM.render(<App/>, document.getElementById('root'));\n"],"sourceRoot":""}